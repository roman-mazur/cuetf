name: dependabot
"on":
  pull_request:
    branches:
      - main
jobs:
  dependabot:
    runs-on: ubuntu:latest
    if: github.event.pull_request.user.login == 'dependabot[bot]'
    steps:
      - id: metadata
        name: 'dependabot: metadata'
        uses: dependabot/fetch-metadata@v2
        with:
          github-token: ${{ secrets.DEPENDABOT_GITUB }}
      - name: regenerate
        run: |-
          export dep_name="${{ steps.metadata.outputs.dependency-names }}"
          echo "Regenerating for $dep_name"
          ./update-provider.sh "$dep_name"
